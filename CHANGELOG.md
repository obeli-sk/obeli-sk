# Changelog
All notable changes to this project will be documented in this file.

## [Unreleased]

## [0.1.0](https://github.com/obeli-sk/obeli-sk/releases/tag/obeli-sk-v0.1.0) - 2024-06-11

### Added
- Spawn and shutdown components dynamically
- Convert timeouts to fallibe errors using stored `return_type`
- Add `schedule` host activity
- Allow adding inactive components
- Show active or inactive components based on a flag
- Implement component activation and deactivation
- Implement `exe get`
- Implement `component get`
- Show more details in `--version`
- Implement `exe schedule`
- Implement `component list`
- Make `parallel-compilation` default
- Start all active components in `server run`
- Implement `component add` subcommand
- Add `inspect` subcommand
- Subscribe to `next_response` when `Await`ing child response
- Add `NonBlockingEventBatching` option
- Allow running with in-memory db
- Allow running the app without creating new executions
- Add chrome tracing layer to `main`
- Allow starting multiple child executions concurrently
- Pass ffqn and params via args
- Enable parallel compilation in `wasmtime`
- Drop types when `Params` is being serialized
- Add limit detection to `workflow_worker`
- Implement serde for `WastVal::Record`
- Implement serde for `WastVal::List`
- Implement serde for `WastVal::Option`
- Implement `Result` (de)serializatin for `WastVal`
- Add `obeli-sk` package spawning a http activity
- Implement `get_expired_timers` for `db-sqlite`
- Implement `append_batch`, `append_tx` for `db-sqlite`
- Implement `get` for `db-sqlite`
- Finish basic fetching, locking, appending for `db-sqlite`
- Implement locking for sqlite
- Implement `append` for sqlite
- Add serde impl for `storage`
- Convert `WalWrapper` serde to `WastVal` counterparts
- Implement `append_tx` to fix possible db inconsistency
- Implement hot workflows for child execution requests
- Implement hot workflows for delay requests
- Add `auto_worker`
- Generate exported function names
- Replay sleep request, persist expired async timers
- Allow workflows to request persistent sleep
- Implement `EpochTicker`
- Add `RunId`
- Allow executors cleaning up expired locks
- Yield on limit reached
- Implement scaffolding for replaying the execution history
- Implement basic child activity scheduling
- Retry on `SupportedFunctionResult::fallible_err`
- Add `append_batch`
- Make `task_limiter` semaphore optional
- Implement epoch based timeouts for activities
- Allow concurrent worker execution
- Implement `ActivityWorker`, failure retries
- Allow extending the lock
- Implement WorkerCommand::Yield
- Add `ExecutionStatusInfo::IntermittentTimeout`
- Rework `WorkerStore`, implement ExecuteBlocking
- Retries on timeouts
- Insert delayed executions
- Prototype wrapping store in a Mutex
- Add `store` parameter to `Worker::run`
- Partial progress without context or dependencies
- Detect worker panics
- Handle enqueueing when the mpmc queue is full
- Inflight execution should restart after executor abort
- Implement graceful shutdown for queue reader
- Cancel all running workers on dropping of its queue reader
- Add scheduler with a basic in-memory impl
- Mock running workflows importing other workflows
- Allow multiple activities in the same interface
- Enable debuginfo in wasm binaries
- Add tracing instrumentation
- Spawn workflows and activities in new tasks
- Pass ActivityRequest to HostActivitySync::handle
- Add StructuredAbortHandle
- Implement ActivityFailed::LimitReached
- Add ExecutionError::LimitReached for workflows
- Enable engine configuration
- Implement sleep host activity
- Detect when replay log is not drained
- Add workflow id, run id
- Persist activity failures
- Run activities in a separate task
- Check supported parameter types in functions_to_metadata
- Check supported return types in functions_to_metadata
- Parse workflow parameters passed as JSON array
- Implement JSON de/serialization for Val, Type
- Support multi value results
- Support 0..1 results of wasm functions
- Support Val return type for workflows
- Support Val parameters, Val results of activities
- Allow calling workflow functions from exported interfaces
- Allow setting wasm paths using program args
- Add noop host function and workflow
- Replay activities
- Run imported activities based on their FQN
- Allow calling 'send' activity without replay
- Parse activities wasm, extract exported functions
- Run wasm-email-provider
- Add wasm-email-provider
- Allow calling any exported func() -> String
- Record and replay a workflow execution
- Add runtime

### Fixed
- Deactivate instead of exitting on component spawn failure
- Send `FunctionMetadataNotFound` on (child) component missing
- Flush non-blocking event cache
- Handle parsing errors in `workflow_ctx`
- Parse parameter names
- Send batched events with a more correct `created_at` date
- Filter responses by JoinSet in `next_response`
- Handle `Locked` by `lock_inner` before anything else in `append`
- Fix race between `JoinNext` and an arriving response
- Update primary key to allow multiple responses in the same joinset
- Re-append execution result on version conflict caused by join responses
- Handle `JoinSetResponse` arriving before `JoinNext`
- Update version in `EventHistory::get_update`
- Correct asserts for concurrent child execution
- Hide `parallel-compilation` under a feature to fix madsim
- Retry on fallible Err only for activity worker
- Fix calculation of retry backoff
- Fix intermittent event counting on retries
- Notify parent on permanent timeout,failure
- Store `join_set_id` for events that are `Created`
- Track delay requests in `locked` table
- Fix `get_expired_timers` for locked executions
- Get next version if none is provided
- Update `next_version` when appending in sqlite
- Stop using `appendable_only_in_lock` to allow CancelRequest anytime
- Disallow appending when in `Finished` for sqlite
- Empty `Params` should be deserialized to the `Empty` variant
- Fix off-by-one bug in `can_be_retried_after`
- Return real retry info in sqlite's `get_expired_timers`
- Make child responding to parent atomic using `append_batch_respond_to_parent`
- Serialize `PrefixedUlid` using `Display` trait
- Do not allow locking right after the current lock expires
- Remove `Created` from `appendable_without_version`
- Handle `appendable_without_version` events in sqlite
- Work around `DatabaseBusy` on pool creation if the db is new
- Ignore version of the newly created child execution
- Check `join_set_id` during event replay
- Do not pass clippy args through `cargo-component-builder`
- Send correct `Type` when replaying results
- Match `child_execution_id`, make its generation deterministic
- Use `JoinSetId` where appropriate, remove `ExecutionIdStr`
- Rollback on `append_batch` failure
- Interrupt inactive executions using async cancellation
- Trim permits to the length of locked executions
- Remove deadlock by using `Semaphore::try_acquire_owned`
- Recycle stores together with instances
- Lock expiry must be in created_at <= x < expires_at
- Check `locked_now` when validating `appendable_only_in_lock`
- Add `PendingState::Finished` to avoid invalid locking
- Pending after expiry must use `expiring_before`
- Expiry before Pending is [Closed, Open)
- Remove just the single id from `pending_scheduled`
- Drain the remaining workers during graceful shutdown
- Return EnqueueError::Closed on a closed channel
- Do not panic on empty packages or interfaces
- Correct import detection error
- Remove unused sleep handler from activity
- Skip adding activities which are not imported
- Allow importing activities with version
- Trigger cargo-component build on wit/src change
- Do not exit execute_persist_event before cleanup
- Allow activity ifc to export multiple functions
- Bump idx when executing HostActivitySync
- Remove shaddowing which caused ExecutionConfig reset
- Fix generic parameter in execute
- Remove cloning of event_history

### Other
- Tweak the changelog format
- Remove '.vscode/' from gitignore
- Add `release-plz`
- Mark required internal packages as publish-able
- Rename snapshot files
- Prefix packages to be released with `obeli-sk-`
- Add `publish.yml`
- Flatten the result of `component_add`
- Add fallible sleep activities
- Rename `timeout_error_container`
- Print function signatures as comments in `gen.rs`
- Add test for execution scheduling another execution
- Fix clippy issues
- Rename host activities package to `obelisk::workflow`
- Fix race in `check_determinism` test
- Fix `check_determinism` failing on running child requests
- Fix clippy issues
- Rename `component_active_get_exported_function`
- Rename `list_components` → `component_list`
- Return activity status in `component_get_metadata`
- Persist exports in `t_component`
- Disable help subcommand
- Switch version flag to `-v`
- Extend display info for `JoinSetRequest`
- Rename binary to `obelisk`
- Switch subcommand `exe` → `execution`
- Switch to `executor serve`
- Use `ComponentId` and `ExecutionId` in `Args`
- Calculate duration from time when the execution was first locked
- Validate function and parameter length
- Simplify debug format of `TypeWrapper::Result`
- Fix clippy issues
- Delete dead benchmarks
- Fix formatting
- Rename `DetectedComponent` → `ComponentDetector`
- Show exports in `component list` by default
- Fix clippy issues
- Extract `commands`
- Update readme
- Fix `test.yml`
- Fix clippy issues
- Implement `append_component` for sqlite
- Add `Component`, `ParameterTypes`, `ReturnType`
- Extract `worker` module
- Fix clippy issues
- Remove `valuable`
- Add `ExecConfig::config_id`
- Make `ExecConfig` serializable
- Remove `ffqns` from `ExecConfig`
- Restrict `check_determinism` to madsim and `Db::Memory`
- Change defaults for `JoinNextBlockingStrategy`, `NonBlockingEventBatching`
- Use `clap` in the CLI
- Simplify `expired_timers_watcher::spawn_new`
- Fix clippy issues
- Bump `flake.lock` that bumps `cargo-component` to v0.13.0
- Bump `wasmtime` to version 21.0.1
- Remove unnecessary wit deps from test programs
- Finish nesting fibo workflow
- Fix clippy issues
- Implement `subscribe_to_pending` for sqlite
- Implement `subscribe_to_pending` for in-memory db
- Set `tick_sleep` to 5ms to lower the CPU usage on idle
- Remove `subscribe_to_pending`
- Add `update_pending_state`
- Fix `check_determinism`
- Clean up rollback for inmemory db
- Add `subscribe_to_pending` with dummy impl
- Rename `next_responses` → `subscribe_to_next_responses`
- Merge pull request [#1](https://github.com/obeli-sk/obeli-sk/pull/1) from obeli-sk/dependabot/github_actions/cachix/install-nix-action-27
- Limit the sqlite pool size to 1
- Update readme
- Add `MADSIM_ALLOW_SYSTEM_THREAD=1`
- Move to `next_responses` without filtering by JoinSet
- Readd `fetch_update` before subscribing to `next_response`
- Add `fiboa-concurrent`
- Run `cargo fmt`
- Add `tokio-console` feature
- Enable `diff-tests` with Madsim
- Bump `async-sqlite`
- Update readme
- Replace `FETCH_HISTORY_LOOP_SLEEP` with a `yield_now`
- Add fibo workers to `main`
- Correct logging and workflow worker response on `Await` timeout
- Fix clippy issues
- Batch all non-blocking events into a single tx
- Pass `DbConnection` to `event_history`
- Use read transaction in `get`
- Extract generated column `history_event_type`
- Verify that `JoinNext` and response combinations produce correct pending state
- Enable parallel compilation for `nosim` tests
- Update readme
- Fix clippy issues
- Improve logging
- Merge `PendingNow` into `PendingAt`
- Persist `JoinSetResponse` separately without version
- Run `cargo fmt`
- Hack around a livelock in madsim
- Simplify `InMemoryDao`, use `Database` in all tests
- Add stress test to http workflow
- Parametrize `http_get_concurrent` by db
- Switch `main` to use `Await` strategy
- Parametrize test by `JoinNextBlockingStrategy`, fix madsim
- Fix clippy issues
- Rename `EventHistoryCommand` → `EventHistoryKey`
- Add `http_get_concurrent_sqlite`
- Improve parameter deserialization errors
- Fix arbitrary ffqn generation
- Fix clippy issues
- Add serial version of `get_successful_concurrently`
- Use `get_success` in workflow test
- Validate (event,version) combination in append
- Update readme
- Use internally tagged enum serialization
- Verify timeouted child notifies the parent
- Run `cargo update`
- Update rust to 1.78
- Run `cargo fmt`
- Rename `supported_functions` → `exported_functions`
- Introduce `WorkerContext`
- Change `WorkerResult` to a new enum
- Add `child_execution_permanently_failed_should_notify_parent`
- Fix clippy issues
- Remove performance tests
- Streamline `SimpleWorker` initialization
- Fix clippy issues
- Update readme
- Remove `FinishedExecutionError::Cancelled` and `ContinueAsNew`
- Move append logic to `append()`
- Add `t_` prefix to sqlite tables
- Fix clippy issue
- Add `DelayReq` and `IndexAction` to `sqlite_dao`
- Call http workflow instead of activity in `main`
- Move `Timeout` to `ClientError`
- Fix clippy issues
- Drop `WastValParams`, types from `Vals`
- Move `val()` to `impl WastVal` block
- Fix `nextest` not running all workspace tests
- Fix clippy issues
- Bump `wasmtime` to `20.0`, refactor value and type handling
- Add http workflow test
- Improve `wasm_workers` error logging
- Update readme and license
- Run `cargo update`
- Move `HistoryEvent::Yield` to `Unlocked`
- Lower some warnings to `info`s
- Regenerate `bindings`, bump `wit-bindgen`
- Fix clippy warnings
- Remove unused dependencies
- Rename `val` → `value` in `WastValWithType`
- Require `DbConnection` in `expired_timers_watcher`
- Run `nix flake update`
- Run `cargo update`
- Tweak log levels
- Fix clippy issues
- Extract tests from `sqlite_dao` to `db_test_stubs`
- Rename `already_retried_count` → `already_tried_count`
- Rename `AsyncTimer` → `AsyncDelay`
- Move `host-activities` to `wasm-workers`
- Verify `lock_pending` is sorted by date
- Add `append_batch_respond_to_parent`
- Move tempfile pool creation to `db-sqlite`
- Remove dummy result from `SupportedFunctionResult::Fallible`
- Rename `SimClock` methods
- Split `lock_pending` into a read and a write tx
- Add sqlite tests to `executor` and `workflow_worker`
- Test simple `executor` lifecycle with sqlite
- Simplify `DbPool::connection()`
- Rename `db` to `db-mem`
- Rename `db-tests` to `db-tests-common`
- Replace row.get(usize) with get(&str) in sqlite
- Extract `expired_lock_should_be_found` to `db-tests`
- Remove `TickBasedDbConnection`
- Simplify signature of `append_batch_create_child`
- Rename `append_tx` → `append_batch_create_child`
- Simplify `append_tx`
- Make version mandatory in `append_batch`
- Remove creation handling for inmemory `append_batch`
- Allow log creation only in `create`, `append_tx`
- Remove default impl for `create`
- Extract `create`
- Fix typo
- Make `PendingState` internally tagged
- Change `PendingState::PendingAt` to struct variant
- Fix clippy issues
- Move `journal` to `inmemory-dao`
- Draft `update_index`
- Switch to fork of `async-sqlite` on github
- Propagate spans into `async-sqlite`
- Use `transaction_write`
- Fix clippy issues
- Run `cargo update`
- Bump `wasmtime`
- Add `DbPool`
- Add `db-sqlite` package with deps
- Fix clippy issues
- Add `WastValWithType`
- Remove `ValWrapper`
- Use primitive floats in `WastVal::f*Float*`
- Move from generics to `Arc<dyn DbConnection>`
- Rename `Task` → `TimersWatcherTask`
- Remove tick based inmemory db from executor
- Disable cache `ci-test-nosim` due to running out of space
- Replace `InMemoryDao::create` params with `CreateRequest`
- Extract `create` parameters to `CreateRequest`
- Rename `ExecutionHistory` → `ExecutionLog`
- Remove `Clone` from `Version`, remove `Version from `WorkerResult::Err`
- Fix clippy issues
- Get rid of epoch based timeouts
- Add an expiry to `JoinNext` to accomodate for hot workflows
- Add stub for `JoinNextBlockingStrategy`
- Disable rust cache for madsim test to avoid out of space error
- Update madsim, remove workarounds
- Fix clippy issues
- Add `Worker::supported_functions`
- Wrap worker with `Arc`
- Add FIXME for non-determinism checks
- Add retries to the fetching of child execution
- Fix clippy issues
- Convert sleep millis to `u32` to avoid overflow of `DateTime`
- Unify `workflow_ctx::check_determinism`
- Remove `JoinSetKind`
- Remove madsim from the default configuration
- Add `join_set_id` to `PendingState::BlockedByJoinSet`, test `check_determinism_call`
- Extract `JoinSetRequest`, move db,worker concepts to `concepts`
- Remove `verify_sleep_host_activity`
- Fix clippy issues
- Verify sleep host activity, check determinism for sleep
- Extract `call_imported_func`, add `CloneFn`
- Convert `FunctionError` → `WorkerError`
- Extract `workflow_ctx`
- Remove dead code
- Add timeout to `wait_for_*` functions
- Update readme
- Replace deprecated `set-output` commands
- Use multiple restore keys
- Fix 'Build tests' step
- Reference the primary cache key on save
- Add 'Build tests' step
- Add http-get activity test
- Remove `wasm` feature from default features
- Fix clippy issue
- Rename job names
- Make `activity_worker` use `clock_fn`
- Make `workflow_worker` use `clock_fn` in epoch callback
- Fix test job names
- Formatting
- Rename test caches
- Drop `tokio_unstable`
- Add cachig to `check.yml`
- Fix job id in `test.yml`
- Do not cache nix store, use rust cache in both test jobs
- Add `dependabot.yml`
- Fix junit.xml file path
- Always save nix cache
- Fix permissions for junit test reporter
- Split the `ci` profile, enable junit reporting
- Fix `ulid_generation_should_be_deterministic`
- Add rust and nix cache
- Do not capture output of tests
- Merge test workflows
- Add `slow-timeout` to nextest config
- Use `cargo nextest`
- Fix `sleep_should_produce_intermittent_timeout`
- Add `test.yml`
- Run `cargo fmt`
- Run clippy for madsim as well
- Fix clippy issues
- Use `install-nix-action`
- Add `check.yml`
- Remove unused code, `noop` activity and workflow
- Remove `lock_expiry_leeway`
- Extract `expired_lock_watcher`
- Remove `tracing-unwrap`
- Remove `FatalError::FfqnNotFound`
- Replace `Cow<'_,str>` with `StrVariant`, implement `Hash` and `PartialEq`
- Remove `FunctionFqnStr`, implement `StrVariant`
- Remove dead code
- Replace `ExecutorName` with `ExecutorId`
- Rename package `scheduler` → `executor`
- Fix fibo activity, verify value in `fibo_workflow_should_schedule_fibo_activity`
- Update readme
- Make most tests use `SimClock`
- Make 2 executor tests use deterministic clock function
- Delete obsolete tests
- Add epoch, select based timeout tests for activities
- Enable `limit_reached` on madsim
- Add timeout test for activity worker
- Update readme
- Remove obsolete packages
- Add `hanging_lock_should_be_cleaned_and_execution_retried`
- Extract `db` package
- Add `madsim_getrandom_should_be_deterministic`
- Add test for deterministic ulid generation
- Update dependencies
- Run `cargo update`
- Bump `wasmtime` to 19.0.0
- Move `.envrc` → `.envrc-example`
- Bump rust to 1.77
- Update bindings after cargo-component bump
- Bump flake.lock, bumping cargo-component to 0.10.1
- Tune parameters for faster execution
- Add `tracing-chrome` export option to `set_up`
- Fix workflow engine configuration
- Remove todos
- Add `RecycleInstancesSetting`
- Remove trait `ExecutionId`
- Disable madsim only for problematic tests
- Erase type of `ExecutorId` in the database
- Move `recycled_instances` to `ActivityConfig`
- Introduce `ConfigId`
- Add `WorkflowWorker`
- Remove activity preload option
- Use `WastVal` as a serde mechanism for `Val`
- Replace usage of `FunctionMetadata` with resuls length
- Use `hashbrown` in inmemory db
- Add `lock_pending_parallel`
- Add `fibo_direct` test
- Improve log messages and field names
- Extract a constant in `sleep_timeout` test
- Bump getrandom to 0.2.11
- Use patched `getrandom` for deterministic tests
- Check that instance is not reused on epoch timeout
- Issue `IntermittentTimeout` in `cleanup_expired_locks`
- Move retry data to execution journal
- Fix warnings
- Simplify `JournalsIndex::fetch_pending`
- Implement `cleanup_expired_locks`
- Remove `DbConnection::fetch_pending`
- Pass the execution deadline to workers
- Use `Duration` in `retry_exp_backoff`
- Clean shutdown in `fibo_parallel`
- Enable `tracing_unstable` to support `Valuable`
- Make `fibo_parallel` configurable
- Extract `obtain_finished_result`
- Convert `WorkflowId` to `PrefixedUlid`
- Introduce `PrefixedUlid`, `ActivityId`
- Check finished activity result
- Add first activity test
- Reorganize `inmemory_dao`
- Reorganize `executor`
- Extract `instances` and make `ActivityWorker` cloneable
- Extract `log_err_if_new`
- Cache all instances in activity worker
- Make Worker::run take `&self`
- Remove db from activity worker
- Remove `DbTickRequest`
- Add `stochastic_test_failure_retry_success`
- Fix `stochastic_execute_task_based`
- Extract activity worker to `wasm-workers` package
- Replay results in `SimpleWorker`
- Disable tests,benches, runtime, cli
- Extract `run_execution`
- Extract wasm utils into `utils`
- Store `pending_state` in journal
- Add `stochastic_` prefix to madsim tests
- Implement graceful shutdown for the executor
- Add note about generative testing
- "test: Experiment with arbtest"
- Experiment with arbtest
- Add a property based test in `inmemory_dao`
- Add Arbitrary impl to some concepts
- Add error logging to `ExecTask`
- Validate that executor event is appended in Locked state
- Simplify `tick_fn`
- Implement `spawn_new` for executor
- Move db concepts to `storage` module
- Update `inmemory_dao` header
- Possibly advance time when requesting `now()`
- Add task-based db test to the executor
- Rename `fetch_lock_pending` → `lock_pending`
- Use `fetch_lock_pending` in the executor
- Implement `fetch_lock_pending`
- Move the `create` impl away from the trait
- Add `DbConnection::create`
- Make `DbConnection::append()` return `Version`
- Implement `get`, send `Params` in `LockResponse`
- Merge read & write errors to `DbError`
- Introduce ExecutionProgress
- Enable`wasmtime/parallel-compilation` in the cli only
- Update readme
- Remove `executor::index::PendingIndex`
- Fix passing `ffqn` to the test
- Move scheduler to executor module
- Remove `created_since` from `fetch_pending`
- Add graceful shutdown when running in madsim
- Bump madsim and Cargo.lock
- Ignore channels in Debug output
- Use `DbConnection` in scheduler
- Implement `DbTaskHandle`
- Add `DbWriteError`
- Implement InMemoryDbConnection, refactor DbConnection
- Use madsim time in `lock_batch()`
- Rewrite in_memory test using DbConnection
- Add new scheduler with a deterministic test
- Rename `inmemory` module to `inmemory_dao`
- Allow `Insert` to accept `ExecutionEventInner::Created`
- Allow inserting any execution events
- Simplify `JournalsIndex::update`
- Add support for the Yield state
- Add support for the Finished state
- Add support for the IntermittentFailure state
- Begin work on new in-memory storage
- Add test for `WorkerCommand::ExecuteBlocking`
- Remove store from `insert`, `schedule` methods
- Wrap store in Arc<Mutex>
- Remove `WorkerCommand::EnqueueNow`
- Extract worker concepts to a new module
- Extract `Executor::spawn_new`, `handle_joined`
- Extract `InflightExecution::transition`
- Move `update_status` and `attempt_to_enqueue`
- Emit info events on execution submit and finish
- Use TimeDelta internally for timeouts
- Extract const `LISTENER_TICK_MICROS`
- Add test for WorkerCommand::DelayUntil
- Stop requiring Debug on stores
- Add `insert`, `schedule` to `InMemoryDatabase`
- Add '_to_' infix to all channels
- Move executor→db receiver to `Enqueued` variant
- Change the client handle to `Receiver<FinishedExecutionResult>`
- Create FinishedExecutionStatus::Success(SupportedFunctionResult)
- Replace WorkflowId with ExecutionId
- Add `test_partial_progress_with_arc_mutex_store`
- "feat: Prototype wrapping store in a Mutex"
- Replace a loop with execution.await
- Bump rustc 1.75 → 1.76, cargo-component, flake.lock
- Update dependencies
- Fix unused `is_activity`
- Use IndexMap for `inflight_executions`
- Use tracing-unwrap
- Use sigils in tracing instrumentation
- Add `two_executors_should_work_in_parallel`
- Extract attempt_to_enqueue
- Remove tracing
- Store finished executions
- Add hyper client for comparison
- Replace QueueWriter with InMemoryDatabase::enqueue
- Simplify QueueReaderAbortHandle::close messages
- Add ffqn to enqueue instrumentation
- Bump Cargo.lock dependencies
- Bump Cargo.toml dependencies
- Add reader,writer,enqueue to InMemoryDatabase
- Rename QueueReaderTask → QueueReader
- Remove unused deps using cargo-machete
- Enable pedantic lints on `tests`
- Enable pedantic lints on `cargo-component-builder`
- Enable pedantic lints on `benches`
- Enable pedantic lints on `val-json`
- Enable pedantic lints on `runtime`
- Enable pedantic lints on `components`
- Extract concepts into a new package
- Log around activity execution
- Set sleep interval to 1ms
- Compare sleep with spawning new process
- Change workflow creation parameter
- Replace Arc<String> with Name and marker types
- Launch host activities in new tokio task
- Tie the runtime with a single workflow
- Mock only the imported functions
- Fix clippy issues
- Allow dead code in bindings.rs
- Rename package testing:types → testing:noop
- Update cargo-component 0.6.0 → 0.7.0
- Update wasmtime 16.0.0 → 17.0.0
- cargo_component_builder::build → build_workflow
- Add chrome tracing to http bench
- Disable workflow engine backtrace details
- Test performance of workflow interruption using noopha
- Make chrome trace output conditional based on envar
- Use display as debug format of FQN
- Run more noop combinations
- Rename replay_handle_interrupt → replay_enqueue_interrupt
- Remove assert_replay_is_drained
- Switch to hot workflow for noopha to avoid interruption
- perf(↓),refactor: Remove HostActivitySync to simplify activity handling
- Make ActivityQueueSender handle event history
- Add CurrentHistoryResult to replay_handle_interrupt
- Move HostActivitySync to host_activity
- Inline handle_activity_async
- Update EventHistory persist* functions
- Rename ActivityRequest::fqn → activity_fqn
- Move errors to the error module
- Extract host activity handling
- Move SupportedFunctionResult to the root module
- Rename fqn → workflow_fwn in WorkflowRequest
- Sort lines in Cargo.toml
- Rename test-programs-types → test-program-noop
- Rename sleep → sleep-host-activity
- Move sleep from event_history → process_activities
- Add sleep benchmark
- Use prestarted activity in http
- Move hot/cold configs to workflow, activity
- Extract noop from fibo
- Rename ExecutionInterrupt → WorkflowFailed
- Rename test-programs-util → cargo-component-builder
- Disable cargo build warning unless RUST_LOG is set
- Introduce RuntimeBuilder
- Move Arcs into FunctionFqn
- Use a mpmc channel for workflows and activities
- Enable multi-threaded runtime for http
- Move workflow id from ActivityQueueReceiver to ActivityRequest
- Update readme
- Bump cargo-component to the next pre-relaese
- Bump flake.lock
- Remove the `--impure` flag from .envrc
- Revert "chore: Add openssl to LD_LIBRARY_PATH in development env"
- Add openssl to LD_LIBRARY_PATH in development env
- Fix rust-analyzer configuration
- Add test_runtime_with_many_activities_and_workflows
- Remove sleep-workflow-run
- Update readme
- Add cargo-nextest to flake.nix
- Initialize logging in http bench
- Initialize logging in set_up
- Add sleep tests, build wasi activity
- Improve logging
- Execute 10 http requests in one iteration
- Fix clippy issue
- Add http get benchmark
- Replace _ → - in test package names
- Bump rustc 1.74.1->1.75
- Bump wasmtime 15->16, cargo-component 0.5->0.6
- Bump rustc 1.74.0 -> 1.74.1
- Remove EventHistory::new
- Remove Runtime::new
- Remove Activity::ifc_fqns_to_function_names
- Add Runtime::add_activity
- Save workflow defs to the runtime
- Remove ActivityAsync
- Move sleep handler to Activities
- Keep a reference to runtime in workflow
- Turn on async_tokio
- Introduce ActivityRequest
- Switch wasm projects to use the wasm feature
- Improve logging
- Add `patch` test
- Introduce execute_one_step_interpret_errors
- Move component builders
- Limit test programs to wasm32 target arch
- Extract common code to test_programs_util
- Remove test-programs-builder
- Change type of iterations parameter to u32
- Simplify deser of JSON params
- Enable pooling allocation strategy
- Allow keeping the activity instance hot
- Add benches for noop workflow, (host) activity
- Fix fibo workflow being optimized too much
- Keep the workflow running while waiting on activity
- Introduce public ExecutionError
- Attempt to stabilize benchmarking results
- Change Event, persistence API, ActivityFailed handling
- Use FunctionFqn in WasmActivity
- Update readme
- Use FunctionFqn when running workflows, activities
- Accept IntoIterator in deserialize_sequence
- Remove cargo-component 0.5.0 overlay
- Add a todo to improve test-programs-builder
- Bump rustc 1.73.0 -> 1.74.0
- Update lock files
- Get rid of panic in Activities::run
- Use Cow in FunctionFqn to avoid needless cloning
- Fix/supress clippy issues
- Make ifc_fqn mandatory
- Remove the old example workflow
- Delete unnecessary Ctx::drop as std streams are not used
- move FunctionFqn, FunctionMetadata to root module
- Decode wasm in Activities::new once
- Update readme
- Handle and persist activity event in execute_persist_event
- Add return types test
- Add fibonacci benchmark
- Add fibonacci activity and workflow
- Use MockServer to verify http-get test
- Improve error messages
- Fix clippy issues
- Add http-get test
- Move main to root crate, use workspace dependencies everywhere
- Use workspace.package to externalize common fields
- Add testing/test-programs/http
- Bump wasmtime 14.0 -> 15.0
- Bump cargo-component-bindings 0.4 -> 0.5
- Bump cargo-component 0.4.0 -> 0.5.0
- Revert "hack: Opt for separate wasm workspaces for runtime boost"
- Add more fibonacci workflows, activities
- Add fibonacci workflows
- Pass event history as &mut
- Remove CurrentEventHistory.new_sync_events
- Stop cloning events into CurrentEventHistory
- Execute sync host events without interrupt
- Use nixpkgs for cargo-component
- Opt for separate wasm workspaces for runtime boost
- Rename email-provider package namespace
- Move host-activities.wit out of crates
- Add stopwatch to main
- Extract email-provider.wit
- Revert "hack: Add wasmtime to the workspace"
- Add wasmtime to the workspace
- Move send() to email-sender interface
- Use cargo-expand from nix unstable
- Move crates to crates folder
- Fix clippy warnings
- Handle host functions in HostImports::handle
- Clean up execute function
- Fix error capitalization
- Fix clippy warnings
- Use EventWrapper to avoid event cloning
- Introduce ExecutionError
- Rename Imports->HostImports
- Rename HostFunctionError::Persist->Handle
- Move hello-world to workflows folder
- Improve readabiliy
- Refactor WIT naming
- Rewrite runtime to async
- Execute component requesting to sleep twice
- Use flake with --impure flag in .envrc
- Add rust-src
- Create hello-world component
- Init with flakes
